@_formattedLocalTime

@code {
    [Parameter] public DateTime? Time { get; set; } 
    [Parameter] public string? Format { get; set; }
    [CascadingParameter] public ActiveUserState? ActiveUserState { get; set; }
    private string? _formattedLocalTime;

    protected override void OnParametersSet()
    {
        var localTime = Time == null
            ? (DateTime?)null
            : TimeZoneInfo.ConvertTime(Time.Value, (ActiveUserState?.TimeZone ?? TimeZoneInfo.Local));
        _formattedLocalTime = Format == null
            ? localTime?.ToString()
            : localTime?.ToString(Format);
    }
}
